/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1048:function(t,e,r){"use strict";r.r(e);r(470),r(42),r(231),r(41),r(610),r(15),r(91);var n=r(159),o=r(962),l=r(26),c=r(559),d={name:"CloChartYearlyComparison",components:{CloButton:n.default,CloTable:o.default,CloIcon:l.default,CloStatBar:c.default},data:function(){return{todayDateStr:"",endODateStr:"",expanded:!0,sortColumn:"year",animated:!0,max:1}},props:{tableData:{type:Array,default:function(){return[]}},userLocale:{type:String,default:"en"},timePeriod:{type:String,default:"year"},rowLimit:{type:Number,default:0},moreLabel:{type:String,default:"Show more"},lessLabel:{type:String,default:"Show less"},columnLabel:{type:String,default:"Species observed by"},caption:{type:String,required:!0}},watch:{tableData:function(t){var e=this;this.calculateMax(),this.tableData=t,this.sortedData=this.tableData.slice(0),this.sortedData.sort((function(a,b){return b[e.sortColumn]-a[e.sortColumn]}))}},computed:{currentYear:function(){return(new Date).getFullYear()},computedCaption:function(){switch(this.sortColumn){case"year":return this.caption+" "+this.$t("generic.sortedByDescending",[this.$t("generic.Year")]);case"progress":return this.caption+" "+this.$t("generic.sortedByDescending",[this.columnLabel+" "+this.todayDateStr]);case"total":return this.caption+" "+this.$t("generic.sortedByDescending",[this.columnLabel+" "+this.endDateStr])}}},beforeMount:function(){this.sortedData=this.tableData;var t=new Date,e=new Date(t.getYear(),t.getMonth()+1,0),r=new Date((new Date).getFullYear(),11,31),n=this.userLocale;this.todayDateStr=t.getDate()+" "+t.toLocaleString(n,{month:"short"}),"month"===this.timePeriod?this.endDateStr=e.getDate()+" "+e.toLocaleString(n,{month:"short"}):this.endDateStr=r.getDate()+" "+r.toLocaleString(n,{month:"short"})},created:function(){this.expanded=0===this.rowLimit,this.calculateMax()},methods:{calculateMax:function(){this.max=Math.max.apply(Math,this.tableData.map((function(t){return t.total})))},percentOfValue:function(t,e){return e>0&&t>0?Number((100*t/e).toFixed(2)):0},format:function(t){return isNaN(t)?t:t.toLocaleString()},rowClasses:function(t){var e=[];return!this.expanded&&t>=this.rowLimit&&e.push("is-visuallyHidden"),this.sortedData[t].year===this.currentYear&&e.push("ChartYearlyComparison-currentYear"),e.join(" ")},sortBy:function(t){var e=this;this.animated=!1,this.sortColumn=t,this.sortedData=this.tableData,this.sortedData.sort((function(a,b){return b[t]-a[t]})),setTimeout((function(){e.animated=!0}),500)}}},h=(r(929),r(2)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ChartYearlyComparison",class:t.animated?"ChartYearlyComparison--animated":""},[r("table",{staticClass:"Table Table--noBorder Table--clearRows u-stack-sm"},[r("caption",{attrs:{"aria-live":"polite"}},[t._v("\n\t\t\t"+t._s(t.computedCaption)+"\n\t\t")]),t._v(" "),r("thead",[r("tr",{staticClass:"Table-row--minorHeading"},[r("th",{attrs:{"aria-sort":"year"===t.sortColumn&&"descending"}},[r("a",{attrs:{role:"button",tabindex:"0"},on:{click:function(e){return t.sortBy("year")},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sortBy("year")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.sortBy("year")}]}},[t._v("\n\t\t\t\t\t\t"+t._s(this.$t("generic.Year"))+"\n\t\t\t\t\t\t"),r("CloIcon",{attrs:{symbol:"triangleDown"}})],1)]),t._v(" "),r("th",{attrs:{"aria-sort":"progress"===t.sortColumn&&"descending"}},[r("a",{attrs:{role:"button",tabindex:"0"},on:{click:function(e){return t.sortBy("progress")},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sortBy("progress")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.sortBy("progress")}]}},[r("span",{staticClass:"is-visuallyHidden"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.columnLabel)+"\n\t\t\t\t\t\t")]),t._v("\n\t\t\t\t\t\t"+t._s(t.todayDateStr)+"\n\t\t\t\t\t\t"),r("CloIcon",{attrs:{symbol:"triangleDown"}})],1)]),t._v(" "),r("th",{attrs:{width:"99%","aria-hidden":"true"}}),t._v(" "),r("th",{attrs:{"aria-sort":"total"===t.sortColumn&&this.$t("generic.descending")}},[r("a",{attrs:{role:"button",tabindex:"0"},on:{click:function(e){return t.sortBy("total")},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sortBy("total")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.sortBy("total")}]}},[r("span",{staticClass:"is-visuallyHidden"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.columnLabel)+"\n\t\t\t\t\t\t")]),t._v("\n\t\t\t\t\t\t"+t._s(t.endDateStr)+"\n\t\t\t\t\t\t"),r("CloIcon",{attrs:{symbol:"triangleDown"}})],1)])])]),t._v(" "),r("tbody",[t._l(t.sortedData,(function(e,n){return[1900!==e.year?r("tr",{key:n,class:t.rowClasses(n)},[r("td",[t._v(t._s(e.year))]),t._v(" "),r("td",[e.progressHref?r("a",{attrs:{href:e.progressHref}},[t._v(t._s(t.format(e.progress)))]):r("span",[t._v(t._s(t.format(e.progress)))])]),t._v(" "),r("td",{attrs:{"aria-hidden":"true"}},[r("div",{staticStyle:{position:"relative"}},[r("CloStatBar",{staticStyle:{position:"absolute"},attrs:{color:"neutralLight",backgroundTransparent:"",percentage:t.percentOfValue(e.total,t.max)}}),t._v(" "),r("CloStatBar",{staticStyle:{position:"absolute"},attrs:{backgroundTransparent:"",percentage:t.percentOfValue(e.progress,t.max)}})],1)]),t._v(" "),r("td",[e.year!==t.currentYear?[r("span",{style:e.total===t.max?"font-weight:bold":""},[e.totalHref?r("a",{attrs:{href:e.totalHref}},[t._v(t._s(t.format(e.total)))]):r("span",[t._v(t._s(t.format(e.total)))])])]:t._e()],2)]):t._e()]}))],2)]),t._v(" "),t.rowLimit>0&&!t.expanded&&t.tableData.length>t.rowLimit?r("button",{staticClass:"Button Button--small Button--hollow u-stack-sm",attrs:{type:"button","aria-hidden":"true",tabindex:"-1"},on:{click:function(e){t.expanded=!0}}},[t._v("\n\t\t"+t._s(t.moreLabel)+"\n\t")]):t._e(),t._v(" "),t.rowLimit>0&&t.expanded&&t.tableData.length>t.rowLimit?r("button",{staticClass:"Button Button--small Button--hollow u-stack-sm",attrs:{type:"button","aria-hidden":"true",tabindex:"-1"},on:{click:function(e){t.expanded=!1}}},[t._v("\n\t\t"+t._s(t.lessLabel)+"\n\t")]):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CloIcon:r(26).default,CloStatBar:r(559).default})},610:function(t,e,r){"use strict";var n=r(3),o=r(64),l=r(611),c=r(235),d=r(5),h=1..toFixed,f=Math.floor,y=function(t,e,r){return 0===e?r:e%2==1?y(t,e-1,r*t):y(t*t,e/2,r)},m=function(data,t,e){for(var r=-1,n=e;++r<6;)n+=t*data[r],data[r]=n%1e7,n=f(n/1e7)},C=function(data,t){for(var e=6,r=0;--e>=0;)r+=data[e],data[e]=f(r/t),r=r%t*1e7},_=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=String(data[t]);s=""===s?e:s+c.call("0",7-e.length)+e}return s};n({target:"Number",proto:!0,forced:h&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!d((function(){h.call({})}))},{toFixed:function(t){var e,r,n,d,h=l(this),f=o(t),data=[0,0,0,0,0,0],v="",k="0";if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(v="-",h=-h),h>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(h*y(2,69,1))-69)<0?h*y(2,-e,1):h/y(2,e,1),r*=4503599627370496,(e=52-e)>0){for(m(data,0,r),n=f;n>=7;)m(data,1e7,0),n-=7;for(m(data,y(10,n,1),0),n=e-1;n>=23;)C(data,1<<23),n-=23;C(data,1<<n),m(data,1,1),C(data,2),k=_(data)}else m(data,0,r),m(data,1<<-e,0),k=_(data)+c.call("0",f);return k=f>0?v+((d=k.length)<=f?"0."+c.call("0",f-d)+k:k.slice(0,d-f)+"."+k.slice(d-f)):v+k}})},611:function(t,e){var r=1..valueOf;t.exports=function(t){return r.call(t)}},719:function(t,e,r){var content=r(930);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(14).default)("67880168",content,!0,{sourceMap:!1})},929:function(t,e,r){"use strict";r(719)},930:function(t,e,r){var n=r(13)(!1);n.push([t.i,"@-webkit-keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.ChartYearlyComparison .Table thead{background-color:transparent}.ChartYearlyComparison .Table thead th{padding:.5rem;font-size:.75rem;line-height:1.333;white-space:nowrap;text-align:right;text-transform:uppercase}@media(min-width:321px){.ChartYearlyComparison .Table thead th{padding:.5rem 1rem}}.ChartYearlyComparison .Table td{padding:.5rem;font-size:.88rem;line-height:1.4205;line-height:1;vertical-align:top;text-align:right}@media(min-width:321px){.ChartYearlyComparison .Table td{padding:.5rem 1rem}}.ChartYearlyComparison .Table td:first-child{border-right:1px solid #f1f1f1}.ChartYearlyComparison .Table .ChartYearlyComparison-currentYear{background-color:#fffcd9}.ChartYearlyComparison .Table .ChartYearlyComparison-currentYear td{font-size:1.13rem;line-height:1.328;line-height:1;font-weight:700}.ChartYearlyComparison--animated .StatBar .StatBar-bar{transition:width .4s ease}",""]),t.exports=n}}]);