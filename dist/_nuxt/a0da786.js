(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{266:function(e,t,r){var content=r(327);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(132).default)("51a0c582",content,!0,{sourceMap:!1})},326:function(e,t,r){"use strict";r(266)},327:function(e,t,r){var n=r(131)(!1);n.push([e.i,"body,html{margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}*{box-sizing:border-box}#map-2{left:0;height:100%;width:75%;padding:0;border-width:0;margin:0;overflow:hidden}#map-2,#sidebar{position:absolute;top:0}#sidebar{bottom:0;right:0;width:25%;padding:1rem}.select{width:100%;height:30px}.mapboxgl-ctrl-group button{color:#000}button{border:1px solid #000;padding:.5rem;cursor:pointer}button:disabled{border-color:#7f828b;color:#7f828b;cursor:default}#selected-ids{width:300px;height:300px;white-space:pre-line}",""]),e.exports=n},331:function(e,t,r){"use strict";r.r(t);r(44),r(43),r(19);var n=r(30),c=r(332),l=r(12),o=(r(60),r(36),r(74),r(75),r(46),r(108),r(76),r(58),r(37),r(268),r(275),r(277),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(38),r(183),r(35),r(77),r(78),r(1)),d=r(293),h=r(294),m=r.n(h),f=r(255),v=(r(296),r(298)),y=r.n(v),_=r(325),x=r(321),C=r.n(x),S=(r(322),r(330)),F=r(324);function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k=o.a.extend({data:function(){return{map:void 0,coords:{lng:-99.35,lat:40},rangeOnly:!1,resolution:3,draw:void 0,filtered:[],children:[],selected:[],filteredBase:[],filteredChildren:[],copied:!1,drawMode:!1,species:"aldfly",options:[{text:"Alder Flycatcher",value:"aldfly"}],season:"breeding",seasonOptions:[{text:"Breeding",value:"breeding"},{text:"Nonbreeding",value:"nonbreeding"},{text:"Prebreeding migration",value:"prebreeding_migration"},{text:"Postbreeding migration",value:"postbreeding_migration"}],seasonText:{breeding:"Breeding",nonbreeding:"Nonbreeding",prebreeding_migration:"Prebreeding migration",postbreeding_migration:"Postbreeding migration"},styleOptions:[{text:"Street",value:"streets-v11"},{text:"Satellite",value:"satellite-streets-v11"}],confirmSeasonChange:!1,displayMsg:!1,deselectLasso:!1,seasonChangeEvent:void 0,lastEvent:{event:void 0,ids:[],layers:[],children:{}},pastActions:[],metadata:{},popup:void 0,style:"streets-v11",count:0,savedData:{},speciesData:{},exported:!1}},computed:{selectedOutput:function(){return JSON.stringify(this.selected)},seasonFilter:function(){return["==",["get","season"],this.season]},actionNumber:function(){return this.pastActions.length-this.count}},watch:{selected:function(){},pastActions:function(){this.count=0},style:function(){var e=this;this.map.setStyle("mapbox://styles/mapbox/".concat(this.style)),this.map.once("style.load",(function(){e.map.off("click",[e.species,"children"],e.mapClick),e.map.off("contextmenu",[e.species,"children"],e.mapRightClick),e.updateLayer(!1)}))},confirmSeasonChange:function(e){e&&(this.resetLayer(this.species,!0),this.exported=!1,this.map.setFilter("".concat(this.species,"_checklists"),this.seasonFilter))},species:function(e,t){this.displayMsg&&(this.displayMsg=!1),this.map.off("click",[t,"children"],this.mapClick),this.map.off("contextmenu",[this.species,"children"],this.mapRightClick),this.resetLayer(t,!1),this.map.setLayoutProperty(t,"visibility","none"),this.updateLayer()}},mounted:function(){var e=this;d.accessToken="pk.eyJ1IjoibGF1cmVub2xkaGFtMTIwMiIsImEiOiJjaW55dm52N2gxODJrdWtseWZ5czAyZmp5In0.YkEUt6GvIDujjudu187eyA",this.map=new d.Map({container:"map-2",style:"mapbox://styles/mapbox/".concat(this.style),center:this.coords,zoom:1,doubleClickZoom:!1,boxZoom:!1,dragRotate:!1}),this.map.doubleClickZoom.disable(),this.draw=new C.a({displayControlsDefault:!1,defaultMode:this.drawMode?"draw_polygon":"simple_select",controls:{polygon:!0},modes:Object.assign(C.a.modes,{draw_polygon:S.a})}),this.map.addControl(this.draw,"top-left"),this.map.addControl(new d.ScaleControl({maxWidth:900})),this.map.addControl(new d.NavigationControl),this.map.on("load",(function(){e.map.addSource("children",{type:"geojson",data:{type:"FeatureCollection",features:[]},promoteId:"h3_address"}),e.map.addLayer({id:"children",source:"children",type:"fill",paint:{"fill-opacity":.3,"fill-color":["case",["boolean",["feature-state","selected"],!1],"deeppink","black"]},layout:{"fill-sort-key":["+",["get","h3_address"]]}}),e.updateLayer(),e.map.on("zoom",(function(){}))}))},methods:{zoomToExtent:function(){var e=this.metadata[this.species].bounding_box;if(e){var t=[e.lon_min,e.lat_min],r=[e.lon_max,e.lat_max];t[0]-r[0]>0&&(t=[-179,t[1]],r=[179,r[1]]);var n=[t,r];this.map.fitBounds(n,{padding:100})}},updateLayer:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.popup&&this.popup.remove(),this.map.getSource(this.species)?(this.resetSelected(),this.selected.map((function(t){e.map.setFeatureState({source:e.species,sourceLayer:e.species,id:t},{selected:!0})})),this.map.setLayoutProperty(this.species,"visibility","visible")):(this.metadata[this.species]||this.fetchTileData(),this.checkTileData(this.metadata,this.species).then((function(){var r=e.metadata[e.species].season_dates;e.seasonOptions.forEach((function(t){var text=Object.keys(r).includes(t.value)?"".concat(r[t.value].start_date," to ").concat(r[t.value].end_date):"unavailable";t.text="".concat(e.seasonText[t.value]," (").concat(text,")")})),e.map.addSource(e.species,{type:"vector",promoteId:"h3_address",tiles:["https://test.cdn.shorebirdviz.ebird.org/range_editor/".concat(e.species,"_v2/{z}/{x}/{y}.pbf")],maxzoom:8});var n="streets-v11"===e.style,c=t?["get","in_range"]:["match",["get","h3_address"],e.selected,!0,!1],l=n?"black":"white",o=n?.3:["case",["boolean",["feature-state","selected"],c],.5,.2];e.map.addLayer({id:e.species,source:e.species,"source-layer":e.species,type:"fill",filter:e.seasonFilter,layout:{visibility:"visible"},paint:{"fill-color":["case",["boolean",["feature-state","selected"],c],"deeppink","black"],"fill-outline-color":["case",["boolean",["feature-state","selected"],c],"deeppink",l],"fill-opacity":o}}),e.map.addLayer({id:"".concat(e.species,"_checklists"),source:e.species,"source-layer":"".concat(e.species,"_checklists"),type:"circle",filter:e.seasonFilter,layout:{visibility:"visible","circle-sort-key":["+",["get","detected"]]},paint:{"circle-opacity":["match",["get","detected"],0,.3,1,.7,.3],"circle-color":["match",["get","detected"],0,"#9c4363",1,"#4405ff","black"],"circle-radius":["match",["get","detected"],0,2,1,4,2],"circle-stroke-width":1,"circle-stroke-color":["match",["get","detected"],0,"transparent",1,"whitesmoke","transparent"]}}),t?(e.resetSelected(),e.zoomToExtent()):(e.map.addSource("children",{type:"geojson",data:{type:"FeatureCollection",features:[]},promoteId:"h3_address"}),e.map.addLayer({id:"children",source:"children",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","selected"],c],"deeppink","black"],"fill-outline-color":["case",["boolean",["feature-state","selected"],c],"deeppink",l],"fill-opacity":o},layout:{"fill-sort-key":["+",["get","h3_address"]]}}),e.filterOutParentHexes(e.species,e.filteredBase),e.filterOutParentHexes("children",e.filteredChildren),e.setChildFeatures(),e.selected.map((function(t){e.map.setFeatureState({source:e.species,sourceLayer:e.species,id:t},{selected:!0})})),e.selected.map((function(t){e.map.setFeatureState({source:"children",id:t},{selected:!0})})))})),this.map.on("mousedown",(function(t){var r=t.originalEvent,n=r.ctrlKey;(r.shiftKey||n)&&e.draw.changeMode("draw_polygon"),e.deselectLasso=n})),this.map.on("mouseup",(function(){e.draw.changeMode("simple_select")})),this.map.on("draw.create",this.drawCreate),this.map.on("draw.modechange",(function(t){setTimeout((function(){e.drawMode=Boolean("draw_polygon"===t.mode)}),10)})),this.popup=new d.Popup({closeButton:!1}),this.map.on("mousemove",[this.species,"children"],(function(e){}))),this.map.on("click",[this.species,"children"],this.mapClick),this.map.on("contextmenu",[this.species,"children"],this.mapRightClick)},checkTileData:function(e,t){return new Promise((function(r){!function n(){if(e[t])return r();setTimeout(n,30)}()}))},fetchTileData:function(){var e=this,t="https://test.cdn.shorebirdviz.ebird.org/range_editor/".concat(this.species,"/range_editor.json");y.a.get(t).then(function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.data;case 2:e.metadata[e.species]=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},disableSeason:function(e){if(this.metadata[this.species])return!this.metadata[this.species].in_range_addresses[e]},resetSelected:function(){var e=this.metadata[this.species].in_range_addresses[this.season];e?this.selected=JSON.parse(JSON.stringify(e)):console.log("SEASON NOT AVAILABLE FOR ".concat(this.species))},resetLayer:function(e,t){var r=this;this.map.getSource("children")&&this.map.getSource(e)&&(this.filteredBase.length&&(this.filteredBase.forEach((function(t){r.map.setFeatureState({source:e,sourceLayer:e,id:t},{selected:!1})})),this.selected.map((function(e){r.map.setFeatureState({source:"children",id:e},{selected:!1})}))),this.selected.length&&(this.selected.map((function(t){r.map.setFeatureState({source:e,sourceLayer:e,id:t},{selected:!1})})),this.selected.map((function(e){r.map.setFeatureState({source:"children",id:e},{selected:!1})}))),this.filteredChildren=[],this.filteredBase=[],this.children=[],this.filterOutParentHexes(e,this.filteredBase,e),this.filterOutParentHexes("children",this.filteredChildren),this.setChildFeatures(),t&&(this.resetSelected(),this.selected.length&&this.selected.map((function(e){r.map.setFeatureState({source:r.species,sourceLayer:r.species,id:e},{selected:!0})})),this.displayMsg=!1),this.pastActions=[])},onSeasonChange:function(input){this.displayMsg=!0,this.seasonChangeEvent={oldVal:input.srcElement._value,newVal:input.target.value},this.season=this.seasonChangeEvent.newVal},seasonChange:function(){var e=this;this.confirmSeasonChange=!0,this.season=this.seasonChangeEvent.newVal,this.displayMsg=!1,setTimeout((function(){e.confirmSeasonChange=!1}),2e3)},uniqueValues:function(e){return Array.from(new Set(e))},setChildFeatures:function(){this.children=this.uniqueValues(this.children);var e=m.a.h3SetToFeatureCollection(this.children,(function(e){return{h3_address:e}}));e.features.forEach((function(e){var polygon=e.geometry.coordinates;polygon[0].forEach((function(e,i){if(i<polygon[0].length-1){var t=polygon[0][i+1][0],r=e[0];t-r<=-180?polygon[0][i+1][0]+=360:t-r>=180&&(polygon[0][i+1][0]-=360)}}))})),this.map.getSource("children").setData(e)},filterOutParentHexes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.species,n=["match",["get","h3_address"],t=this.uniqueValues(t),!1,!0];e===r?this.map.setFilter(e,t.length?["all",this.seasonFilter,n]:this.seasonFilter):this.map.setFilter(e,t.length?n:null)},removeItemFromArray:function(e,t){e.splice(e.indexOf(t),1)},arrayIncludesItem:function(e,t){return e.includes(t)},updateSelected:function(e){this.selected.includes(e.id)?this.removeItemFromArray(this.selected,e.id):this.selected.push(e.id)},getChildrenHexes:function(e,t){var r=[];return e.forEach((function(e){r.push.apply(r,Object(c.a)(f.h3ToChildren(e,t)))})),r},bboxToPixel:function(polygon){var e=Object(F.a)(polygon),t=this.map.project([e[2],e[3]]);return[this.map.project([e[0],e[1]]),t]},copyToClipboard:function(){var e=this;navigator.clipboard.writeText(this.selectedOutput),this.copied=!0,setTimeout((function(){e.copied=!1}),2e3)},saveLastEvent:function(e,t,r){this.lastEvent={event:e,ids:t,layers:r,children:{}}},drawCreate:function(e){var t=this,r=this.bboxToPixel(e.features[0]),n=this.map.queryRenderedFeatures(r,{layers:[this.species,"children"]}),c=[];n.forEach((function(t){var r=_.polygon(t.geometry.coordinates),n=_.intersect(r,_.polygon(e.features[0].geometry.coordinates),{properties:t.properties});n&&c.push(n)})),this.lastEvent={event:this.deselectLasso?"lasso_deselect":"lasso_select",ids:[],layers:[this.species,"children"],children:{}},this.pastActions.push({event:this.deselectLasso?"lasso_deselect":"lasso_select",ids:[],layers:[this.species,"children"],children:{}}),c.forEach((function(e){t.selected.includes(e.properties.h3_address)||t.deselectLasso?t.selected.includes(e.properties.h3_address)&&t.deselectLasso&&(t.removeItemFromArray(t.selected,e.properties.h3_address),t.pastActions[t.pastActions.length-1].ids.push(e.properties.h3_address)):(t.selected.push(e.properties.h3_address),t.lastEvent.ids.push(e.properties.h3_address),t.pastActions[t.pastActions.length-1].ids.push(e.properties.h3_address)),t.map.setFeatureState({source:t.species,sourceLayer:t.species,id:e.properties.h3_address},{selected:!t.deselectLasso}),t.map.setFeatureState({source:"children",id:e.properties.h3_address},{selected:!t.deselectLasso})})),this.draw.delete(e.features[0].id)},mapClick:function(e){var t=this;if(!this.drawMode){var r=!e.originalEvent.shiftKey,n=e.features[0];console.log("map click",n);var l=parseInt(n.id[1])+1;if(r){var o=n.properties.in_range,d=!this.selected.includes(n.id)&&o,h=!Object.keys(n.state).length&&o,m=d||(h?!o:!n.state.selected);this.map.setFeatureState(w(w({source:n.source},n.source===this.species&&{sourceLayer:this.species}),{},{id:n.id}),{selected:m}),this.updateSelected(n),this.lastEvent={event:this.map.getFeatureState(w(w({source:n.source},n.source===this.species&&{sourceLayer:this.species}),{},{id:n.id})).selected?"click_select":"click_deselect",ids:[n.id],layers:[n.source],children:{}},this.pastActions.push({event:this.map.getFeatureState(w(w({source:n.source},n.source===this.species&&{sourceLayer:this.species}),{},{id:n.id})).selected?"click_select":"click_deselect",ids:[n.id],layers:[n.source],children:{}})}else if(l<=5){var v,y=f.h3ToChildren(n.id,l);(v=this.children).push.apply(v,Object(c.a)(y)),this.setChildFeatures(),n.source===this.species?this.filteredBase.push(n.id):this.filteredChildren.push(n.id);var _=this.arrayIncludesItem(this.selected,n.id);y.forEach((function(e){_&&(t.map.setFeatureState({source:"children",id:e},{selected:!0}),t.selected.push(e)),t.filteredChildren.includes(e)&&t.removeItemFromArray(t.filteredChildren,e),t.filteredBase.includes(e)})),_&&(this.map.setFeatureState({source:"children",id:n.id},{selected:!1}),this.removeItemFromArray(this.selected,n.id)),n.source===this.species?this.filterOutParentHexes(this.species,this.filteredBase):this.filterOutParentHexes("children",this.filteredChildren),this.arrayIncludesItem(this.children,n.id)&&this.removeItemFromArray(this.children,n.id),this.lastEvent={event:_?"click_expand_selected":"click_expand_deselected",ids:[n.id],layers:[n.source],children:{}},this.pastActions.push({event:_?"click_expand_selected":"click_expand_deselected",ids:[n.id],layers:[n.source],children:{}})}}},mapRightClick:function(e){var t=this,r=e.originalEvent;if(!this.drawMode&&!r.ctrlKey&&0!==r.button){var n=this.map.queryRenderedFeatures(e.point,{layers:[this.species,"children"]})[0],source=n.source;if(n){var l=f.h3GetResolution(n.id);if(l>=3){var o,d=f.h3ToParent(n.id,l-1);if(source===this.species){var h=m.a.h3ToFeature(d);o=this.map.queryRenderedFeatures(this.bboxToPixel(h),{layers:[this.species]})}this.children.push(d),this.map.setFeatureState({source:"children",id:d},{selected:this.arrayIncludesItem(this.selected,n.id)}),this.arrayIncludesItem(this.selected,n.id)&&this.selected.push(d),this.lastEvent={event:this.arrayIncludesItem(this.selected,n.id)?"click_collapse_selected":"click_collapse_deselected",ids:[d],layers:[n.source],children:{}},this.pastActions.push({event:this.arrayIncludesItem(this.selected,n.id)?"click_collapse_selected":"click_collapse_deselected",ids:[d],layers:[n.source],children:{}});var v,y,_=[];if([2,3,4,5].forEach((function(e){e>=l&&_.push.apply(_,Object(c.a)(f.h3ToChildren(d,e)))})),source===this.species&&o.forEach((function(e){_.includes(e.id)&&(t.lastEvent.children[e.id]=t.selected.includes(e.id),t.pastActions[t.pastActions.length-1].children[e.id]=t.selected.includes(e.id))})),_.forEach((function(e){t.children.includes(e)&&(t.lastEvent.children[e]=t.selected.includes(e),t.pastActions[t.pastActions.length-1].children[e]=t.selected.includes(e),t.removeItemFromArray(t.children,e)),t.selected.includes(e)&&(t.removeItemFromArray(t.selected,e),t.map.setFeatureState({source:"children",id:e},{selected:!1}))})),source===this.species)(v=this.filteredBase).push.apply(v,_),this.filterOutParentHexes(this.species,this.filteredBase);else this.removeItemFromArray(this.filteredChildren,d),this.filterOutParentHexes("children",this.filteredChildren),(y=this.filteredBase).push.apply(y,_),this.filterOutParentHexes(this.species,this.filteredBase);this.setChildFeatures()}else console.log("CANNOT COLLAPSE FOR RES",l)}}},undo:function(e){var t=this,r=e.event,n=e.ids,source=e.layers;if("lasso_select"===r)n.forEach((function(e){t.removeItemFromArray(t.selected,e),t.map.setFeatureState({source:"children",id:e},{selected:!1}),t.map.setFeatureState({source:t.species,sourceLayer:t.species,id:e},{selected:!1})}));else if("lasso_deselect"===r)n.forEach((function(e){t.selected.push(e),t.map.setFeatureState({source:"children",id:e},{selected:!0}),t.map.setFeatureState({source:t.species,sourceLayer:t.species,id:e},{selected:!0})}));else if("click_collapse_selected"===r){var l,o=this.filteredBase.includes(n[0])?"children":source[0],d=n[0],h=Object.keys(e.children);(l=this.children).push.apply(l,h),this.setChildFeatures(),o===this.species?this.filteredBase.push(d):this.filteredChildren.push(d);var m=this.arrayIncludesItem(this.selected,d);h.forEach((function(r){t.map.setFeatureState({source:"children",id:r},{selected:e.children[r]}),!t.selected.includes(r)&&e.children[r]?t.selected.push(r):t.selected.includes(r)&&!e.children[r]&&t.removeItemFromArray(t.selected,d),t.filteredChildren.includes(r)&&t.removeItemFromArray(t.filteredChildren,r)})),m&&(this.map.setFeatureState({source:"children",id:d},{selected:!1}),this.removeItemFromArray(this.selected,d)),o===this.species?(this.filteredChildren.push(d),this.filterOutParentHexes("children",this.filteredChildren),this.filterOutParentHexes(this.species,this.filteredBase)):this.filterOutParentHexes("children",this.filteredChildren),this.arrayIncludesItem(this.children,d)&&this.removeItemFromArray(this.children,d)}else if("click_collapse_deselected"===r){var v,y=this.filteredBase.includes(n[0])?"children":source[0],_=n[0],x=Object.keys(e.children);(v=this.children).push.apply(v,x),this.setChildFeatures(),y===this.species?this.filteredBase.push(_):this.filteredChildren.push(_);var C=this.arrayIncludesItem(this.selected,_);x.forEach((function(r){t.map.setFeatureState({source:"children",id:r},{selected:e.children[r]}),!t.selected.includes(r)&&e.children[r]?t.selected.push(r):t.selected.includes(r)&&!e.children[r]&&t.removeItemFromArray(t.selected,_),t.filteredChildren.includes(r)&&t.removeItemFromArray(t.filteredChildren,r)})),C&&(this.map.setFeatureState({source:"children",id:_},{selected:!1}),this.removeItemFromArray(this.selected,_)),y===this.species?(this.filteredChildren.push(_),this.filterOutParentHexes("children",this.filteredChildren),this.filterOutParentHexes(this.species,this.filteredBase)):this.filterOutParentHexes("children",this.filteredChildren),this.arrayIncludesItem(this.children,_)&&this.removeItemFromArray(this.children,_)}else if("click_expand_selected"===r){var S=n[0],F=f.h3GetResolution(S);this.children.push(S),this.selected.includes(S)||this.selected.push(S),this.map.setFeatureState({source:"children",id:S},{selected:!0});var O,k,I=f.h3ToChildren(S,F+1);if(I.forEach((function(e){t.children.includes(e)&&t.removeItemFromArray(t.children,e),t.selected.includes(e)&&(t.removeItemFromArray(t.selected,e),t.map.setFeatureState({source:"children",id:e},{selected:!1}))})),source[0]===this.species)(O=this.filteredBase).push.apply(O,Object(c.a)(I)),this.filterOutParentHexes(this.species,this.filteredBase);else this.removeItemFromArray(this.filteredChildren,S),this.filterOutParentHexes("children",this.filteredChildren),(k=this.filteredBase).push.apply(k,Object(c.a)(I)),this.filterOutParentHexes(this.species,this.filteredBase);this.setChildFeatures()}else if("click_expand_deselected"===r){var A=n[0],E=f.h3GetResolution(A);this.children.push(A);var L,P,T=f.h3ToChildren(A,E+1);if(T.forEach((function(e){t.children.includes(e)&&t.removeItemFromArray(t.children,e),t.selected.includes(e)&&(t.removeItemFromArray(t.selected,e),t.map.setFeatureState({source:"children",id:e},{selected:!1}))})),source[0]===this.species)(L=this.filteredBase).push.apply(L,Object(c.a)(T)),this.filterOutParentHexes(this.species,this.filteredBase);else this.removeItemFromArray(this.filteredChildren,A),this.filterOutParentHexes("children",this.filteredChildren),(P=this.filteredBase).push.apply(P,Object(c.a)(T)),this.filterOutParentHexes(this.species,this.filteredBase);this.setChildFeatures()}else if("click_select"===r){var B=this.filteredBase.includes(n[0])?"children":source[0];this.removeItemFromArray(this.selected,n[0]),this.map.setFeatureState(w(w({source:B},B===this.species&&{sourceLayer:this.species}),{},{id:n[0]}),{selected:!1})}else if("click_deselect"===r){var j,H=this.filteredBase.includes(n[0])?"children":source[0];(j=this.selected).push.apply(j,Object(c.a)(n)),this.map.setFeatureState(w(w({source:H},H===this.species&&{sourceLayer:this.species}),{},{id:n[0]}),{selected:!0})}},undoTest:function(){this.count++,this.actionNumber>=0&&this.undo(this.pastActions[this.actionNumber]),this.removeItemFromArray(this.pastActions,this.pastActions[this.actionNumber])},download:function(){this.exported=!0},save:function(){this.savedData[this.species]||(this.savedData[this.species]={}),this.savedData[this.species][this.season]={selected:this.selected,filteredChildren:this.filteredChildren,filteredBase:this.filteredBase,children:this.children},console.log(this.savedData)}}}),I=k,A=(r(326),r(56)),component=Object(A.a)(I,(function(){var e,t=this,r=t._self._c;t._self._setupProxy;return r("div",{staticStyle:{display:"flex"}},[r("div",{attrs:{id:"map-2"}}),t._v(" "),r("div",{attrs:{id:"sidebar"}},[r("span",[t._v("Select a species:")]),t._v(" "),r("br"),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.species,expression:"species"}],staticClass:"select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.species=e.target.multiple?r:r[0]}}},t._l(t.options,(function(option){return r("option",{domProps:{value:option.value}},[t._v("\n          "+t._s(option.text)+"\n        ")])})),0),t._v(" "),r("br"),t._v(" "),r("br"),t._v(" "),r("span",[t._v("Select a season:")]),t._v(" "),r("br"),t._v(" "),r("select",{staticClass:"select",attrs:{disabled:t.displayMsg},domProps:{value:t.season},on:{input:t.onSeasonChange}},t._l(t.seasonOptions,(function(option){return r("option",{attrs:{disabled:t.disableSeason(option.value)},domProps:{value:option.value}},[t._v("\n          "+t._s(option.text)+"\n        ")])})),0),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.disableSeason(t.season),expression:"disableSeason(season)"}],staticStyle:{color:"red","font-weight":"500"}},[t._v("\n        "+t._s(t.season)+" season UNAVAILABLE for "+t._s(t.species)+"\n      ")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.displayMsg,expression:"displayMsg"}],staticClass:"alert-msg",staticStyle:{border:"1px solid",margin:"1rem 0"},style:{borderColor:t.exported?"#cc3340":"#bd580a"}},[r("div",{staticClass:"header",staticStyle:{color:"white",padding:"0.5rem","font-weight":"500"},style:{background:t.exported?"#cc3340":"#bd580a"}},[t.exported?t._e():r("div",[r("strong",[t._v("Export "+t._s(t.seasonText[null===(e=t.seasonChangeEvent)||void 0===e?void 0:e.oldVal])+" season data?")])]),t._v(" "),t.exported?r("div",[r("strong",[t._v("Confirm season change")])]):t._e()]),t._v(" "),r("div",{staticClass:"body",staticStyle:{padding:"0.5rem",display:"flex","flex-direction":"column"},style:{background:t.exported?"#f6e4e5":"#f4e8df"}},[t.exported?t._e():r("div",[t._v("\n            You must export your current selections before changing seasons. Map changes will be lost and cannot be retrieved once changed.\n          ")]),t._v(" "),t.exported?r("div",[t._v("\n            Check that your download was successful and confirm season change.\n          ")]):t._e(),t._v(" "),r("div",{staticClass:"button-menu",staticStyle:{"margin-left":"auto","margin-top":"0.75rem"}},[r("button",{on:{click:function(e){t.confirmSeasonChange=!1,t.displayMsg=!1,t.season=t.seasonChangeEvent.oldVal}}},[t._v("Cancel")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:!t.exported,expression:"!exported"}],on:{click:t.download}},[t._v("Export")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.exported,expression:"exported"}],on:{click:t.seasonChange}},[t._v("Change season")])])])]),t._v(" "),r("br"),r("br"),t._v(" "),r("label",{attrs:{for:"basemap"}},[t._v("Basemap: ")]),r("br"),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.style,expression:"style"}],staticClass:"select",attrs:{id:"basemap"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.style=e.target.multiple?r:r[0]}}},t._l(t.styleOptions,(function(option){return r("option",{domProps:{value:option.value}},[t._v("\n          "+t._s(option.text)+"\n        ")])})),0),t._v(" "),r("hr"),t._v("\n      # selected hexes: "),r("strong",[t._v(t._s(t.selected.length))]),t._v(" "),r("br"),r("br"),t._v(" "),r("button",{attrs:{disabled:t.actionNumber<=0},on:{click:t.undoTest}},[t._v("UNDO LAST ACTION")]),t._v(" "),r("hr"),t._v(" "),t._m(0)])])}),[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticStyle:{"line-height":"30px"}},[e._v("\n        SELECT: "),t("strong",[e._v("CLICK")]),e._v(" a grey hex\n        "),t("br"),e._v("\n        DESELECT: "),t("strong",[e._v("CLICK")]),e._v(" a pink hex\n        "),t("br"),e._v("\n        REFINE: "),t("strong",[e._v("CLICK + SHIFT")]),e._v(" "),t("br"),e._v("\n        COLLAPSE: "),t("strong",[e._v("RIGHT CLICK")]),e._v(" "),t("br"),e._v("\n        LASSO SELECT: "),t("strong",[e._v("SHIFT + DRAG")]),e._v(" "),t("br"),e._v("\n        LASSO DESELECT: "),t("strong",[e._v("CTRL + DRAG")])])}],!1,null,null,null);t.default=component.exports}}]);