/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{543:function(e,t,o){var content=o(598);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(14).default)("725fe0e8",content,!0,{sourceMap:!1})},597:function(e,t,o){"use strict";o(543)},598:function(e,t,o){var n=o(13)(!1);n.push([e.i,'@-webkit-keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.Map{position:relative;overflow:hidden}.Map:before{display:block;content:"";width:100%;padding-top:50%}.Map .Map-map{position:absolute;top:0;left:0;right:0;bottom:0}.Map .gm-style-iw{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-size:.75rem;line-height:1.333;color:#232323}',""]),e.exports=n},616:function(e,t,o){"use strict";o.r(t);o(41),o(36);var n={name:"CloMapGoogleLoader",props:{apiKey:{type:String,required:!0},lazy:{type:Boolean,default:!0},markers:{type:Array,default:function(){return[]}},bounds:{type:Object,default:null},mapTypeId:{type:String,default:"satellite"}},data:function(){return{google:null,map:null,mapWidth:0}},computed:{url:function(){return"https://maps.googleapis.com/maps/api/js?key="+this.apiKey+"&libraries=places&callback=googleMapsApiLoaded"}},watch:{bounds:{deep:!0,handler:function(){this.bounds&&this.changeBounds()}},mapTypeId:function(){this.map.setMapTypeId(this.mapTypeId)}},mounted:function(){var e=this;if(this.lazy){var t=new IntersectionObserver((function(o){o.forEach((function(o){o.intersectionRatio>0&&(e.loadLibraryIfNeeded(),t.unobserve(e.$el))}))}));t.observe(this.$el)}else this.loadLibraryIfNeeded()},beforeDestroy:function(){window.document.removeEventListener("lichen:googleMapsApiLoaded",this.initializeMap),this.google.maps.event.clearListeners(this.map,"zoom_changed"),this.google.maps.event.clearListeners(this.map,"dragend"),window.document.removeEventListener("lichen:resize",this.handleResize)},methods:{loadLibraryIfNeeded:function(){"undefined"==typeof google?(this.loadGoogleMapsLibrary(),window.document.addEventListener("lichen:googleMapsApiLoaded",this.initializeMap)):this.initializeMap()},initializeMap:function(){if(this.google=google,this.map=new google.maps.Map(this.$refs.map,{mapTypeId:this.mapTypeId}),this.markers.length){var e=new this.google.maps.LatLngBounds;if(this.markers.forEach((function(marker){e.extend(marker.position)})),this.map.fitBounds(e),1==this.markers.length){var t=new this.google.maps.LatLng(this.markers[0].position.lat,this.markers[0].position.lng);this.setMaxZoomForSingleLoc(t)}}else if(!this.bounds){var o=new this.google.maps.LatLngBounds(new this.google.maps.LatLng(85,-180),new this.google.maps.LatLng(-85,180));this.map.fitBounds(o)}this.google.maps.event.addListener(this.map,"zoom_changed",this.zoomChanged),this.google.maps.event.addListener(this.map,"dragend",this.dragEnd),this.mapWidth=this.$el.clientWidth,window.document.addEventListener("lichen:resize",this.handleResize)},handleResize:function(){var e=this.$el.clientWidth;if(e!==this.mapWidth){this.mapWidth=e;var t=this.map.getCenter();this.google.maps.event.trigger(this.map,"resize"),this.map.setCenter(t)}},changeBounds:function(){if(console.log(JSON.parse(JSON.stringify(this.bounds))),this.bounds.hasOwnProperty("maxX")){var e=this.bounds;179.773408===e.maxX&&71.390685===e.maxY&&(e.maxX=-65,e.maxY=67),-180.000001===e.minX&&81.857324===e.maxY&&(e.minX=35,e.maxY=74);var t=new google.maps.LatLngBounds(new google.maps.LatLng(this.bounds.minY,this.bounds.minX),new google.maps.LatLng(this.bounds.maxY,this.bounds.maxX));this.map.fitBounds(t)}else this.map.fitBounds(this.bounds)},zoomChanged:function(){this.$emit("zoom_changed",this.getZoomAndBounds())},dragEnd:function(){this.$emit("dragend",this.getZoomAndBounds())},getZoomAndBounds:function(){var e=this.map.getBounds(),t=e.getNorthEast(),o=e.getSouthWest();return{bounds:{minY:o.lat(),minX:o.lng(),maxY:t.lat(),maxX:t.lng()},zoom:this.map.getZoom()}},loadGoogleMapsLibrary:function(){var e=this;window.googleMapsApiLoaded||(window.googleMapsApiLoaded=function(){if("undefined"==typeof google){var t=window.document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e.url),(window.document.getElementsByTagName("head")[0]||window.document.documentElement).appendChild(t)}else window.document.dispatchEvent(new CustomEvent("lichen:googleMapsApiLoaded"))},window.googleMapsApiLoaded())},setMaxZoomForSingleLoc:function(e){var t=this;(new google.maps.MaxZoomService).getMaxZoomAtLatLng(e,(function(e){"OK"!==e.status?(console.log("MaxZoomService error"),t.map.setCenter(t.bounds.getCenter()),t.map.setZoom(10)):t.map.setZoom(e.zoom)}))}}},d=(o(597),o(2)),component=Object(d.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"Map"},[o("div",{ref:"map",staticClass:"Map-map"}),e._v(" "),Boolean(this.google)&&Boolean(this.map)?[e._t("default",null,{google:e.google,map:e.map})]:e._e()],2)}),[],!1,null,null,null);t.default=component.exports}}]);