(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{249:function(e,f,t){var content=t(252);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(132).default)("08075738",content,!0,{sourceMap:!1})},251:function(e,f,t){"use strict";t(249)},252:function(e,f,t){var r=t(131)(!1);r.push([e.i,"#map-2{width:1000px;height:800px;background:purple}.mapboxgl-ctrl-group button{color:#000}button{border:1px solid #000;padding:.5rem}button:disabled{border-color:#7f828b;color:#7f828b}.alert{background:red}button{cursor:pointer}",""]),e.exports=r},275:function(e,f,t){"use strict";t.r(f);t(44),t(33),t(74),t(75);var r=t(276),o=t(30),n=(t(45),t(19),t(72),t(73),t(43),t(34),t(58),t(35),t(253),t(255),t(256),t(257),t(258),t(259),t(260),t(261),t(262),t(263),t(264),t(265),t(266),t(267),t(268),t(269),t(270),t(36),t(179),t(1)),c=t(271),d=t(272),l=t.n(d),h=t(250);t(273);function m(object,e){var f=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),f.push.apply(f,t)}return f}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(f){Object(o.a)(e,f,source[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(f){Object.defineProperty(e,f,Object.getOwnPropertyDescriptor(source,f))}))}return e}var v=n.a.extend({data:function(){return{map:void 0,coords:{lng:-96.35,lat:37},selectMode:!0,rangeOnly:!1,resolution:3,draw:void 0,filtered:[],children:[],selected:[]}},watch:{rangeOnly:function(){},selected:function(e){}},mounted:function(){var e=this;c.accessToken="pk.eyJ1IjoibGF1cmVub2xkaGFtMTIwMiIsImEiOiJjaW55dm52N2gxODJrdWtseWZ5czAyZmp5In0.YkEUt6GvIDujjudu187eyA",this.map=new c.Map({container:"map-2",style:"mapbox://styles/mapbox/streets-v11",center:this.coords,zoom:6,doubleClickZoom:!1}),this.map.addControl(new c.ScaleControl({maxWidth:900})),this.map.on("load",(function(){e.map.addSource("base-hex",{type:"vector",promoteId:"h3_address",tiles:["http://localhost:8081/data/r3/{z}/{x}/{y}.pbf"],maxzoom:4});e.map.addLayer({id:"base-hex",source:"base-hex","source-layer":"hex",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","selected"],["match",["get","h3_address"],["832633fffffffff","832652fffffffff","8326f6fffffffff","8326e2fffffffff","832602fffffffff","8326e4fffffffff","832618fffffffff","8326a8fffffffff","8326e6fffffffff","83261afffffffff","832611fffffffff","83261cfffffffff","832613fffffffff","8326f5fffffffff","83261efffffffff","8326e1fffffffff","8326ecfffffffff","832615fffffffff","8326eefffffffff","832603fffffffff","8326e5fffffffff","83260efffffffff","832619fffffffff","8326a9fffffffff","83261bfffffffff","8326abfffffffff","8326f4fffffffff","83261dfffffffff","8326e0fffffffff","8326adfffffffff"],!0,!1]],"deeppink","black"],"fill-opacity":.3}}),e.map.addSource("children",{type:"geojson",data:{type:"FeatureCollection",features:[]},promoteId:"h3_address"}),e.map.addLayer({id:"children",source:"children",type:"fill",paint:{"fill-opacity":.3,"fill-color":["case",["boolean",["feature-state","selected"],!1],"deeppink","black"]},layout:{"fill-sort-key":["+",["get","h3_address"]]}}),e.map.addSource("species-range",{type:"geojson",data:{id:"8eb25ba70d452d97e1ddfcce5dd3c509",type:"Feature",properties:{},geometry:{coordinates:[[[-99.33506625318147,45.13314712628562],[-101.00487955708923,45.13314712628562],[-101.56148399172514,42.683079866666105],[-102.36546817508791,41.62863803346093],[-103.66421185590485,40.9782147291387],[-103.91159160463224,39.65795874143228],[-103.23129729563291,39.1322398894163],[-101.49963905454342,38.84381654664111],[-100.57196499681673,38.3119933246779],[-97.17049345181951,37.971513567475],[-97.04680357745609,36.84165053422949],[-96.6757339543653,36.49440699140514],[-94.6348510273673,36.792140282626605],[-93.58348709527718,38.36050350728348],[-95.68621495945743,38.55421925672027],[-95.50068014791177,39.61032990250396],[-96.98495864027439,40.791188855481806],[-96.73757889154703,41.44346493969201],[-96.18097445691163,41.90540315049239],[-96.49019914282017,43.000506465552206],[-96.79942382872926,43.3612818895958],[-98.28370232109134,43.496022931319146],[-98.84030675572728,44.29816727163572],[-98.77846181854555,45.00210923171318],[-99.08768650445464,45.08950120560945],[-99.33506625318147,45.13314712628562],[-99.33506625318147,45.13314712628562]]],type:"Polygon"}}}),e.map.addLayer({id:"species-range",source:"species-range",type:"line",paint:{"line-color":"deeppink","line-dasharray":[4,2],"line-width":2}}),e.map.on("contextmenu",(function(f){var t=e.map.queryRenderedFeatures(f.point,{layers:["children"]})[0];if(t){var o=parseInt(t.id[1])-1,n=h.h3ToParent(t.id,o);e.arrayIncludesItem(e.filtered,n)&&e.removeItemFromArray(e.filtered,n);var c=3===o?"base-hex":t.source;e.filterOutParentHexes(c),e.map.setFeatureState(y(y({source:c},"base-hex"===c&&{sourceLayer:"hex"}),{},{id:n}),{selected:e.arrayIncludesItem(e.selected,t.id)}),e.arrayIncludesItem(e.selected,t.id)&&e.selected.push(n);var d=[];[3,4,5,6].forEach((function(e){e>=o+1&&d.push.apply(d,Object(r.a)(h.h3ToChildren(n,e)))})),d.forEach((function(f){e.children.includes(f)&&e.removeItemFromArray(e.children,f),e.selected.includes(f)&&(e.removeItemFromArray(e.selected,f),e.map.setFeatureState({source:"children",id:f},{selected:!1}))})),e.setChildFeatures()}})),e.map.on("click",["base-hex","children","species-range"],(function(f){if(f.features.map((function(e){return e.layer.id})).includes("species-range")){var t=f.features.filter((function(e){return"species-range"===e.layer.id}))[0];e.selectMode?void 0===t.state.selected?e.map.setFeatureState({source:t.source,sourceLayer:t.sourceLayer,id:t.id},{selected:!1}):e.map.setFeatureState({source:t.source,sourceLayer:t.sourceLayer,id:t.id},{selected:!t.state.selected}):console.log("explode",t.id)}else{var o=f.features[0],n=parseInt(o.id[1])+1,c=4===n?"base-hex":o.source;if(e.selectMode)e.map.setFeatureState(y(y({source:c},"base-hex"===c&&{sourceLayer:"hex"}),{},{id:o.id}),{selected:!o.state.selected}),e.updateSelected(o);else if(n<=6){var d,l=h.h3ToChildren(o.id,n);(d=e.children).push.apply(d,Object(r.a)(l)),e.setChildFeatures(),e.filtered.push(o.id);var m=e.arrayIncludesItem(e.selected,o.id);l.forEach((function(f){m&&(e.map.setFeatureState({source:"children",id:f},{selected:!0}),e.selected.push(f)),e.filtered.includes(f)&&e.removeItemFromArray(e.filtered,f)})),m&&(e.map.setFeatureState(y(y({source:c},"base-hex"===c&&{sourceLayer:"hex"}),{},{id:o.id}),{selected:!1}),e.removeItemFromArray(e.selected,o.id));["base-hex","children"].forEach((function(f){e.filterOutParentHexes(f)}))}}}));var f=new c.Popup({closeButton:!1});e.map.on("mousemove",["base-hex","children"],(function(t){f.setHTML(t.features[0].id).setLngLat(t.lngLat).addTo(e.map)}))}))},methods:{uniqueValues:function(e){return Array.from(new Set(e))},setChildFeatures:function(){this.children=this.uniqueValues(this.children);var e=l.a.h3SetToFeatureCollection(this.children,(function(e){return{h3_address:e}}));this.map.getSource("children").setData(e)},filterOutParentHexes:function(e){this.map.setFilter(e,this.filtered.length?["match",["get","h3_address"],this.filtered,!1,!0]:null)},removeItemFromArray:function(e,f){e.splice(e.indexOf(f),1)},arrayIncludesItem:function(e,f){return e.includes(f)},updateSelected:function(e){e.state.selected?this.removeItemFromArray(this.selected,e.id):this.selected.push(e.id)}}}),x=(t(251),t(47)),component=Object(x.a)(v,(function(){var e=this,f=e._self._c;e._self._setupProxy;return f("span",[f("button",{on:{click:function(f){e.selectMode=!e.selectMode}}},[e._v("Selection mode: "+e._s(e.selectMode))]),e._v(" "),f("button",{on:{click:function(f){e.rangeOnly=!e.rangeOnly}}},[e._v("show new range only: "+e._s(e.rangeOnly))]),e._v(" "),f("div",{attrs:{id:"map-2"}})])}),[],!1,null,null,null);f.default=component.exports}}]);