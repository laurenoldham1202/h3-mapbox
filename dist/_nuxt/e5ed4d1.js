(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{533:function(e,t,r){var content=r(582);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(14).default)("bb215908",content,!0,{sourceMap:!1})},581:function(e,t,r){"use strict";r(533)},582:function(e,t,r){var o=r(13)(!1);o.push([e.i,"@-webkit-keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}#map-2{width:1000px;height:800px;background:purple}.mapboxgl-ctrl-group button{color:#000}button{border:1px solid #000;padding:.5rem}button:disabled{border-color:#7f828b;color:#7f828b}.alert{background:red}",""]),e.exports=o},728:function(e,t,r){"use strict";r.r(t);var o=r(162),n=(r(41),r(55),r(56),r(36),r(45),r(31),r(11),r(632),r(633),r(634),r(635),r(636),r(637),r(638),r(639),r(640),r(641),r(642),r(643),r(644),r(645),r(646),r(647),r(648),r(29),r(232),r(0)),l=r(649),c=r(650),d=r.n(c),h=r(580),f=r(651),m=r.n(f),y=(r(653),r(654)),x=r.n(y),v=n.a.extend({data:function(){return{map:void 0,coords:{lng:-96.35,lat:37},selectMode:!1,rangeOnly:!1,resolution:3,draw:void 0,filtered:[],children:[]}},watch:{rangeOnly:function(){}},mounted:function(){var e=this;l.accessToken="pk.eyJ1IjoibGF1cmVub2xkaGFtMTIwMiIsImEiOiJjaW55dm52N2gxODJrdWtseWZ5czAyZmp5In0.YkEUt6GvIDujjudu187eyA",this.map=new l.Map({container:"map-2",style:"mapbox://styles/mapbox/streets-v11",center:this.coords,zoom:6,doubleClickZoom:!1}),this.draw=new m.a({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},modes:Object.assign(m.a.modes,{draw_polygon:x.a})}),this.map.addControl(this.draw,"top-left"),this.map.addControl(new l.ScaleControl({maxWidth:900})),this.map.on("load",(function(){e.map.addSource("base-hex",{type:"vector",promoteId:"h3_address",tiles:["http://localhost:8081/data/r3/{z}/{x}/{y}.pbf"],maxzoom:4}),e.map.addLayer({id:"base-hex",source:"base-hex","source-layer":"hex",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","selected"],!1],"deeppink","black"],"fill-opacity":.3}}),e.map.addSource("children",{type:"geojson",data:{type:"FeatureCollection",features:[]},promoteId:"h3_address"}),e.map.addLayer({id:"children",source:"children",type:"fill",paint:{"fill-opacity":.3,"fill-color":["case",["boolean",["feature-state","selected"],!1],"deeppink","black"]},layout:{"fill-sort-key":["+",["get","h3_address"]]}}),e.map.addSource("species-range",{type:"vector",tiles:["http://localhost:8082/data/range-outline-max-6/{z}/{x}/{y}.pbf"],maxzoom:7,promoteId:"h3_address"}),e.map.addLayer({id:"species-range",source:"species-range","source-layer":"hex",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","selected"],!0],"deeppink","transparent"],"fill-opacity":.3}}),e.map.on("contextmenu",(function(t){var r=e.map.queryRenderedFeatures(t.point,{layers:["children"]})[0];if(r){var n=parseInt(r.id[1])-1,l=h.h3ToParent(r.id,n);e.arrayIncludesItem(e.filtered,l)&&e.removeItemFromArray(e.filtered,l);var c=3===n?"base-hex":r.source;e.filterOutParentHexes(c);var d=[];[3,4,5,6].forEach((function(e){e>=n+1&&d.push.apply(d,Object(o.a)(h.h3ToChildren(l,e)))})),d.forEach((function(t){e.children.includes(t)&&e.removeItemFromArray(e.children,t)})),e.setChildFeatures()}})),e.map.on("click",["base-hex","children","species-range"],(function(t){if(t.features.map((function(e){return e.layer.id})).includes("species-range"));else{var r=t.features[0],n=parseInt(r.id[1])+1;if(!e.selectMode&&n<=6){var l,c=h.h3ToChildren(r.id,n);(l=e.children).push.apply(l,Object(o.a)(c)),e.setChildFeatures(),e.filtered.push(r.id),c.forEach((function(t){e.filtered.includes(t)&&e.removeItemFromArray(e.filtered,t)}));["base-hex","children"].forEach((function(t){e.filterOutParentHexes(t)}))}}}));var t=new l.Popup({closeButton:!1});e.map.on("mousemove",["base-hex","children"],(function(r){t.setHTML(r.features[0].id).setLngLat(r.lngLat).addTo(e.map)}))}))},methods:{uniqueValues:function(e){return Array.from(new Set(e))},setChildFeatures:function(){this.children=this.uniqueValues(this.children);var e=d.a.h3SetToFeatureCollection(this.children,(function(e){return{h3_address:e}}));this.map.getSource("children").setData(e)},filterOutParentHexes:function(e){this.map.setFilter(e,this.filtered.length?["match",["get","h3_address"],this.filtered,!1,!0]:null)},removeItemFromArray:function(e,t){e.splice(e.indexOf(t),1)},arrayIncludesItem:function(e,t){return e.includes(t)}}}),k=(r(581),r(2)),component=Object(k.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("button",{on:{click:function(t){e.selectMode=!e.selectMode}}},[e._v("Selection mode: "+e._s(e.selectMode))]),e._v(" "),r("button",{on:{click:function(t){e.rangeOnly=!e.rangeOnly}}},[e._v("show new range only: "+e._s(e.rangeOnly))]),e._v(" "),r("div",{attrs:{id:"map-2"}})])}),[],!1,null,null,null);t.default=component.exports}}]);