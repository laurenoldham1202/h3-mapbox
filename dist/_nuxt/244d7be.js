/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[77,39,78],{470:function(t,n,e){"use strict";var r=e(18),o=e(7),l=e(90),d=e(27),c=e(20),R=e(67),f=e(157),m=e(113),h=e(228),v=e(5),y=e(62),I=e(74).f,S=e(54).f,C=e(22).f,_=e(471).trim,k="Number",x=o.Number,w=x.prototype,A=R(y(w))==k,L=function(t){if(m(t))throw TypeError("Cannot convert a Symbol value to a number");var n,e,r,o,l,d,c,code,R=h(t,"number");if("string"==typeof R&&R.length>2)if(43===(n=(R=_(R)).charCodeAt(0))||45===n){if(88===(e=R.charCodeAt(2))||120===e)return NaN}else if(48===n){switch(R.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+R}for(d=(l=R.slice(2)).length,c=0;c<d;c++)if((code=l.charCodeAt(c))<48||code>o)return NaN;return parseInt(l,r)}return+R};if(l(k,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var N,U=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof U&&(A?v((function(){w.valueOf.call(e)})):R(e)!=k)?f(new x(L(n)),e,U):L(n)},E=r?I(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),$=0;E.length>$;$++)c(x,N=E[$])&&!c(U,N)&&C(U,N,S(x,N));U.prototype=w,w.constructor=U,d(o,k,U)}},471:function(t,n,e){var r=e(35),o=e(16),l="["+e(472)+"]",d=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),R=function(t){return function(n){var e=o(r(n));return 1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(c,"")),e}};t.exports={start:R(1),end:R(2),trim:R(3)}},472:function(t,n){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},473:function(t,n,e){var content=e(476);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(14).default)("b134ce3e",content,!0,{sourceMap:!1})},474:function(t,n,e){"use strict";e.r(n);var r={components:{CloIcon:e(26).default},data:function(){return{}}},o=(e(475),e(2)),component=Object(o.a)(r,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"LoadingAnimation"},[n("CloIcon",{attrs:{symbol:"spinner"}})],1)}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{CloIcon:e(26).default})},475:function(t,n,e){"use strict";e(473)},476:function(t,n,e){var r=e(13)(!1);r.push([t.i,"@-webkit-keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.LoadingAnimation{position:absolute;background-color:#fff;top:0;left:0;right:0;bottom:0;padding:0}.LoadingAnimation--inLightbox{background-color:transparent}.LoadingAnimation--inLightbox .Icon{margin:-18px auto 0;fill:#757575}.LoadingAnimation--inLightbox .Icon,.LoadingAnimation--modal{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.LoadingAnimation--modal{right:auto;bottom:auto;padding:1rem;border-radius:.25rem;transition:opacity 1s ease-out}[dir=rtl] .LoadingAnimation--modal{left:auto;right:0}.LoadingAnimation--modal .Icon{margin:1rem auto!important}.LoadingAnimation--overlay{background-color:hsla(0,0%,100%,.8)}.LoadingAnimation--showMore{position:relative;background-color:transparent}.LoadingAnimation--stacked{text-align:center;background-color:hsla(0,0%,100%,.8);padding:1rem;z-index:100}.LoadingAnimation--stacked .Icon{margin-top:10%;margin-bottom:10%}.no-js .LoadingAnimation{display:none}.LoadingAnimation .Icon{display:block;width:2rem;height:2rem;fill:#228000;margin:2rem auto;-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-name:spin;animation-name:spin;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear}.LoadingAnimation--small{position:relative;display:inline;background-color:transparent}.LoadingAnimation--small .Icon{width:1rem;height:1rem;display:inline;margin:0}.LoadingAnimation--inTypeahead{background:none;right:.5rem;top:.5rem;bottom:auto;left:auto}[dir=rtl] .LoadingAnimation--inTypeahead{left:.5rem;right:auto}.LoadingAnimation--inTypeahead .Icon{margin:0;width:1.5rem;height:1.5rem}.LoadingAnimation--basic{position:relative;background-color:transparent}.LoadingAnimation[aria-hidden=true]{visibility:hidden}",""]),t.exports=r},507:function(t,n,e){var content=e(553);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(14).default)("4524d064",content,!0,{sourceMap:!1})},527:function(t,n,e){"use strict";e.r(n);e(470);var r={components:{CloIcon:e(26).default},props:{rating:{type:Number,default:null},ratingCount:{type:Number,default:0},minimal:{type:Boolean,default:!1},reverse:{type:Boolean,default:!1}}},o=(e(552),e(2)),component=Object(o.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"RatingStars",class:t.reverse?"RatingStars--reverse":""},[e("span",{staticClass:"is-visuallyHidden"},[t._v(" "+t._s(t.$t("mediaRating.ratingsSingular"))+" "+t._s(t.rating)+" ")]),t._v(" "),e("div",{class:"RatingStars-stars RatingStars-stars-"+t.rating},[e("CloIcon",{attrs:{symbol:"star"}}),t._v(" "),e("CloIcon",{attrs:{symbol:"star"}}),t._v(" "),e("CloIcon",{attrs:{symbol:"star"}}),t._v(" "),e("CloIcon",{attrs:{symbol:"star"}}),t._v(" "),e("CloIcon",{attrs:{symbol:"star"}})],1),t._v(" "),t.minimal?t._e():e("span",{staticClass:"RatingStars-count"},[t._v(t._s(t.ratingCount)+"\n\t\t"),1===t.ratingCount?[t._v("\n\t\t\t"+t._s(t.$t("mediaRating.ratingsSingular"))+"\n\t\t")]:[t._v("\n\t\t\t"+t._s(t.$t("mediaRating.ratingsPlural"))+"\n\t\t")]],2)])}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{CloIcon:e(26).default})},552:function(t,n,e){"use strict";e(507)},553:function(t,n,e){var r=e(13)(!1);r.push([t.i,"@-webkit-keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.RatingStars{display:flex;align-items:center}.RatingStars .RatingStars-stars{display:inline-flex;margin:0 .25rem 0 0}[dir=rtl] .RatingStars .RatingStars-stars{margin:0 0 0 .25rem}.RatingStars .RatingStars-stars .Icon--star{fill:#d6d6d6;width:1rem;height:1rem}.CheckboxGroup .RatingStars .RatingStars-stars{position:relative;bottom:.2rem;margin-right:.5rem}.RatingStars .RatingStars-count{color:#6a6a6a;font-size:.75rem;line-height:1.333}.RatingStars .RatingStars-stars-1 .Icon--star:first-child,.RatingStars .RatingStars-stars-2 .Icon--star:first-child,.RatingStars .RatingStars-stars-2 .Icon--star:nth-child(2),.RatingStars .RatingStars-stars-3 .Icon--star:first-child,.RatingStars .RatingStars-stars-3 .Icon--star:nth-child(2),.RatingStars .RatingStars-stars-3 .Icon--star:nth-child(3),.RatingStars .RatingStars-stars-4 .Icon--star:first-child,.RatingStars .RatingStars-stars-4 .Icon--star:nth-child(2),.RatingStars .RatingStars-stars-4 .Icon--star:nth-child(3),.RatingStars .RatingStars-stars-4 .Icon--star:nth-child(4),.RatingStars .RatingStars-stars-5 .Icon--star:first-child,.RatingStars .RatingStars-stars-5 .Icon--star:nth-child(2),.RatingStars .RatingStars-stars-5 .Icon--star:nth-child(3),.RatingStars .RatingStars-stars-5 .Icon--star:nth-child(4),.RatingStars .RatingStars-stars-5 .Icon--star:nth-child(5){fill:#228000}.RatingStars .RatingStars-stars-{display:none}.RatingStars--reverse .RatingStars-stars .Icon--star{fill:#757575}.RatingStars--reverse .RatingStars-count{color:#d6d6d6}",""]),t.exports=r},554:function(t,n,e){var content=e(609);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(14).default)("fe413642",content,!0,{sourceMap:!1})},608:function(t,n,e){"use strict";e(554)},609:function(t,n,e){var r=e(13)(!1);r.push([t.i,"@-webkit-keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.Rating{display:inline-flex;position:relative;font-size:.88rem;line-height:1.4205}.Rating .Rating-user{display:flex;align-items:center;color:#0070b3;text-align:left}[dir=rtl] .Rating .Rating-user{text-align:right}.Rating .Rating-user .Icon{width:1rem;height:1rem;margin:0 .25rem 0 0}[dir=rtl] .Rating .Rating-user .Icon{margin:0 0 0 .25rem}.Rating .Rating-user .Rating-user-value{font-weight:700}.Rating .Rating-user .Icon--spinner{width:16px;height:15px}.Rating .Rating-user--saved .Icon--check{fill:#228000}.Rating .Rating-user--saved .Rating-user-value{color:#228000}.Rating .Rating-edit{position:absolute;background-color:#fff;border:1px solid #d6d6d6;min-width:240px;z-index:1007;padding:.5rem;box-shadow:0 2px 4px rgba(0,0,0,.2)}.Rating .Rating-edit.fade-enter-active,.Rating .Rating-edit.fade-leave-active{transition:opacity .2s}.Rating .Rating-edit.fade-enter,.Rating .Rating-edit.fade-leave-to{opacity:0}.Rating .Rating-edit fieldset{position:relative;border:0;padding:0;margin:0}.Rating .Rating-edit .Rating-edit-stars{margin:0 0 .25rem;display:flex;justify-content:stretch}.Rating .Rating-edit .Rating-edit-stars .Icon{width:2rem;height:2rem;fill:transparent;stroke:#0070b3;stroke-width:1;transition:fill .2s ease,stroke .2s ease}.Rating .Rating-edit .Rating-edit-stars .Rating-edit-star{position:relative;display:flex;flex-grow:1}.Rating .Rating-edit .Rating-edit-stars .Rating-edit-star--filled .Icon{fill:#228000;stroke:#228000}.Rating .Rating-edit .Rating-edit-stars [type=radio]{opacity:0;position:absolute}.Rating .Rating-edit .Rating-edit-stars label{display:flex;flex-grow:1;padding:.5rem;margin:0;cursor:pointer}.Rating .Rating-edit .Rating-help{font-size:.75rem;line-height:1.333;display:flex}.Rating .Rating-edit .Rating-help a{margin:0 .5rem 0 0}[dir=rtl] .Rating .Rating-edit .Rating-help a{margin:0 0 0 .5rem}.Rating .Rating-edit .Rating-help .Icon{width:1rem;height:1rem}.Rating .Rating-edit .Rating-help span{justify-self:flex-end}.Rating .Rating-edit .Rating-edit-close{position:absolute;right:.5rem;top:.5rem;display:flex}[dir=rtl] .Rating .Rating-edit .Rating-edit-close{right:auto;left:.5rem}.Rating .Rating-edit .Rating-edit-close .Icon{width:1rem;height:1rem;fill:#757575}.Rating .Rating-error{max-width:320px;text-align:left}[dir=rtl] .Rating .Rating-error{text-align:right}.Rating--reverse{color:#f8f8f8}.Rating--reverse .Rating-user{color:#8ad4ff}.Rating--reverse .Rating-user--saved .Icon--check{fill:#b3ee9d}.Rating--reverse .Rating-user--saved .Rating-user-value{color:#b3ee9d}.Rating--reverse .Rating-edit{background-color:#232323;border:1px solid #6a6a6a}.Rating--reverse .Rating-edit .Rating-edit-stars .Icon{stroke:#8ad4ff}.Rating--reverse .Rating-edit .Rating-edit-stars .Rating-edit-star--filled .Icon{fill:#228000;stroke:#228000}.Rating--reverse .Rating-edit .Rating-edit-close .Icon{fill:#6a6a6a}.Rating--reverse a{color:#8ad4ff}",""]),t.exports=r},622:function(t,n,e){"use strict";e.r(n);e(470),e(41),e(15);var r=e(76),o=e.n(r),l=e(26),d=e(474),c=e(527),R={components:{CloIcon:l.default,CloRatingStars:c.default,CloLoadingAnimation:d.default},data:function(){return{edit:!1,stars:[1,2,3,4,5],saving:!1,saved:!1,error:!1,currentUserRating:null,mouseOver:null,editStyle:{left:0,right:"auto",top:0,bottom:"auto"}}},props:{rating:{type:Number,default:null},count:{type:Number,default:0},userRating:{type:Number,default:null},reverse:{type:Boolean,default:!1},mediaType:{type:String,default:""},assetId:{type:String,required:!0},getRatingUrl:{type:String,default:null},saveRatingUrl:{type:String,default:"/rating-api"},ratingApiHeader:{type:String,default:null},ratingCsrf:{type:String,default:null},keyboardListener:{type:Boolean,default:!1},ratingFromParent:{type:Number,default:0}},created:function(){this.currentRating=this.rating,this.currentCount=this.count,this.currentUserRating=this.userRating,this.getRatingUrl&&this.getRating()},mounted:function(){this.keyboardListener&&document.addEventListener("keyup",this.handleKeyboard)},beforeDestroy:function(){this.keyboardListener&&document.removeEventListener("keyup",this.handleKeyboard)},watch:{ratingFromParent:function(t){this.currentUserRating=t,this.saveRating()},userRating:function(t){this.currentUserRating=t,this.$forceUpdate()}},computed:{starClasses:function(){var t=this;return this.stars.map((function(n,e){var r=[];return(!t.mouseOver&&n<=t.currentUserRating||n<=t.mouseOver)&&r.push("Rating-edit-star--filled"),r.join(" ")}))},legend:function(){switch(this.mediaType){case"p":return this.$t("mediaRating.legendImage");case"a":return this.$t("mediaRating.legendAudio");case"v":return this.$t("mediaRating.legendVideo");default:return this.$t("mediaRating.rateQuality")}},helpUrl:function(){var t="https://support.ebird.org/en/support/solutions/articles/48001064392-rating-media";switch(this.mediaType){case"p":return t+"#RatingPhotos";case"a":return t+"#RatingAudio";case"v":return t+"#RatingVideos";default:return t}}},methods:{saveRating:function(){var t=this;if(this.currentUserRating>0&&this.currentUserRating<=5){this.edit=!1,this.saving=!0,this.error=!1;var n=this.saveRatingUrl+this.assetId+"/my-rating",e={"X-Requested-With":"XMLHttpRequest"};this.ratingApiHeader&&(e["Session-Inheritance-Config"]=this.ratingApiHeader),this.ratingCsrf&&(e["X-CSRF-TOKEN"]=this.ratingCsrf);var r=new FormData;r.append("rating",this.currentUserRating),o()({method:"post",url:n,data:r,headers:e}).then((function(n){n.data.assetId==t.assetId&&(t.currentRating=Math.round(n.data.ratingAverage),t.currentCount=n.data.ratingCount,t.saving=!1,t.error=!1,t.saved=!0,t.$emit("rating-update",n.data))})).catch((function(n){t.error=!0}))}},getRating:function(){var t=this,n=this.getRatingUrl+this.assetId,e={"X-Requested-With":"XMLHttpRequest"};this.ratingApiHeader&&(e["Session-Inheritance-Config"]=this.ratingApiHeader),this.ratingCsrf&&(e["X-CSRF-TOKEN"]=this.ratingCsrf),o.a.get(n,null,e).then((function(n){n.data.hasOwnProperty(t.assetId)&&(t.currentRating=Math.round(n.data[t.assetId].ratingAverage),t.currentCount=n.data[t.assetId].ratingCount,t.currentUserRating=n.data[t.assetId].rating,t.$forceUpdate())})).catch((function(n){console.log(n),t.currentRating=t.rating,t.currentCount=t.count,t.currentUserRating=t.userRating}))},editRating:function(){var t=this.$el.getBoundingClientRect(),style={left:0,right:"auto",top:0,bottom:"auto"};window.innerHeight-t.bottom<t.top&&(style.bottom=0,style.top="auto"),t.left>window.innerWidth-t.right&&(style.right=0,style.left="auto"),this.editStyle=style,this.edit=!0},handleKeyboard:function(t){if(!t.shiftKey&&!t.metaKey)switch(t.which){case 49:case 97:this.handleRatingByKey(1,t);break;case 50:case 98:this.handleRatingByKey(2,t);break;case 51:case 99:this.handleRatingByKey(3,t);break;case 52:case 100:this.handleRatingByKey(4,t);break;case 53:case 101:this.handleRatingByKey(5,t)}},handleRatingByKey:function(t,n){n.preventDefault(),n.stopPropagation(),this.currentUserRating=t,this.saveRating()}}},f=(e(608),e(2)),component=Object(f.a)(R,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"Rating",class:t.reverse?"Rating--reverse":""},[e("button",{attrs:{type:"button"},on:{click:t.editRating}},[t.currentRating?[e("CloRatingStars",{staticClass:"u-stack-xs",attrs:{rating:t.currentRating,ratingCount:t.currentCount,label:"Ratings",reverse:t.reverse}}),t._v(" "),t.currentUserRating?e("div",{staticClass:"Rating-user",class:t.saving||t.saved?"Rating-user--saved":""},[t.saving?t._e():e("CloIcon",{attrs:{symbol:"check"}}),t._v(" "),t.saving&&!t.error?e("CloLoadingAnimation",{staticClass:"LoadingAnimation--small"}):t._e(),t._v(" "),e("span",[t._v("\n\t\t\t\t\t"+t._s(t.$t("mediaRating.yourRating"))+"\n\t\t\t\t\t"),e("span",{staticClass:"Rating-user-value"},[t._v(t._s(t.currentUserRating))])])],1):e("div",{staticClass:"Rating-user"},[e("CloIcon",{attrs:{symbol:"plus"}}),t._v(" "),e("span",[t._v(t._s(t.$t("mediaRating.rateQuality")))])],1)]:e("div",{staticClass:"Rating-user u-stack-md"},[e("CloIcon",{attrs:{symbol:"star"}}),t._v(" "),e("span",[t._v(t._s(t.$t("mediaRating.noRating")))])],1),t._v(" "),t.error?e("div",{staticClass:"Rating-error"},[t._v(t._s(t.$t("mediaRating.error")))]):t._e()],2),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.edit?e("div",{staticClass:"Rating-edit",style:t.editStyle,attrs:{id:"rating-edit"}},[e("fieldset",[e("legend",[t._v(t._s(t.legend))]),t._v(" "),e("div",{staticClass:"Rating-edit-stars"},t._l(t.stars,(function(n){return e("span",{key:n,staticClass:"Rating-edit-star",class:t.starClasses[n-1]},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentUserRating,expression:"currentUserRating"}],attrs:{type:"radio",name:"rating",id:"rating-"+n},domProps:{value:n,checked:t._q(t.currentUserRating,n)},on:{change:[function(e){t.currentUserRating=n},t.saveRating]}}),t._v(" "),e("label",{attrs:{for:"rating-"+n},on:{mouseenter:function(e){t.mouseOver=n},mouseleave:function(n){t.mouseOver=null}}},[e("span",{staticClass:"is-visuallyHidden"},[t._v(t._s(n))]),t._v(" "),e("CloIcon",{attrs:{symbol:"star"}})],1)])})),0),t._v(" "),e("div",{staticClass:"Rating-help"},[e("a",{attrs:{href:t.helpUrl}},[e("CloIcon",{attrs:{symbol:"help"}}),t._v("\n\t\t\t\t\t\t"+t._s(t.$t("mediaRating.ratingHelp"))+"\n\t\t\t\t\t")],1),t._v(" "),e("span",[t._v(t._s(t.$t("mediaRating.ratingKeyHelp")))])])]),t._v(" "),e("button",{staticClass:"Rating-edit-close",attrs:{type:"button"},on:{click:function(n){t.edit=!1}}},[e("span",{staticClass:"is-visuallyHidden"},[t._v(t._s(t.$t("generic.Close")))]),t._v(" "),e("CloIcon",{attrs:{symbol:"close"}})],1)]):t._e()])],1)}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{CloRatingStars:e(527).default,CloIcon:e(26).default,CloLoadingAnimation:e(474).default})}}]);