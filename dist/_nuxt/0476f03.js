(window.webpackJsonp=window.webpackJsonp||[]).push([[6,4],{249:function(e,t,r){var content=r(252);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(132).default)("728e2852",content,!0,{sourceMap:!1})},251:function(e,t,r){"use strict";r(249)},252:function(e,t,r){var n=r(131)(!1);n.push([e.i,"#map-2{width:1000px;height:800px;background:purple}.mapboxgl-ctrl-group button{color:#000}button{border:1px solid #000;padding:.5rem}button:disabled{border-color:#7f828b;color:#7f828b}.alert{background:red}",""]),e.exports=n},275:function(e,t,r){"use strict";r.r(t);var n=r(276),o=(r(43),r(19),r(72),r(73),r(33),r(58),r(34),r(253),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(35),r(179),r(1)),l=r(271),c=r(272),d=r.n(c),f=r(250),h=(r(273),o.a.extend({data:function(){return{map:void 0,coords:{lng:-96.35,lat:37},selectMode:!1,rangeOnly:!1,resolution:3,draw:void 0,filtered:[],children:[]}},watch:{rangeOnly:function(){}},mounted:function(){var e=this;l.accessToken="pk.eyJ1IjoibGF1cmVub2xkaGFtMTIwMiIsImEiOiJjaW55dm52N2gxODJrdWtseWZ5czAyZmp5In0.YkEUt6GvIDujjudu187eyA",this.map=new l.Map({container:"map-2",style:"mapbox://styles/mapbox/streets-v11",center:this.coords,zoom:6,doubleClickZoom:!1}),this.map.addControl(new l.ScaleControl({maxWidth:900})),this.map.on("load",(function(){e.map.addSource("base-hex",{type:"vector",promoteId:"h3_address",tiles:["http://localhost:8081/data/r3/{z}/{x}/{y}.pbf"],maxzoom:4}),e.map.addLayer({id:"base-hex",source:"base-hex","source-layer":"hex",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","selected"],!1],"deeppink","black"],"fill-opacity":.3}}),e.map.addSource("children",{type:"geojson",data:{type:"FeatureCollection",features:[]},promoteId:"h3_address"}),e.map.addLayer({id:"children",source:"children",type:"fill",paint:{"fill-opacity":.3,"fill-color":["case",["boolean",["feature-state","selected"],!1],"deeppink","black"]},layout:{"fill-sort-key":["+",["get","h3_address"]]}}),e.map.addSource("species-range",{type:"vector",tiles:["http://localhost:8082/data/range-outline-max-6/{z}/{x}/{y}.pbf"],maxzoom:7,promoteId:"h3_address"}),e.map.addLayer({id:"species-range",source:"species-range","source-layer":"hex",type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","selected"],!0],"deeppink","transparent"],"fill-opacity":.3}}),e.map.on("contextmenu",(function(t){var r=e.map.queryRenderedFeatures(t.point,{layers:["children"]})[0];if(r){var o=parseInt(r.id[1])-1,l=f.h3ToParent(r.id,o);e.arrayIncludesItem(e.filtered,l)&&e.removeItemFromArray(e.filtered,l);var c=3===o?"base-hex":r.source;e.filterOutParentHexes(c);var d=[];[3,4,5,6].forEach((function(e){e>=o+1&&d.push.apply(d,Object(n.a)(f.h3ToChildren(l,e)))})),d.forEach((function(t){e.children.includes(t)&&e.removeItemFromArray(e.children,t)})),e.setChildFeatures()}})),e.map.on("click",["base-hex","children","species-range"],(function(t){if(t.features.map((function(e){return e.layer.id})).includes("species-range"));else{var r=t.features[0],o=parseInt(r.id[1])+1;if(!e.selectMode&&o<=6){var l,c=f.h3ToChildren(r.id,o);(l=e.children).push.apply(l,Object(n.a)(c)),e.setChildFeatures(),e.filtered.push(r.id),c.forEach((function(t){e.filtered.includes(t)&&e.removeItemFromArray(e.filtered,t)}));["base-hex","children"].forEach((function(t){e.filterOutParentHexes(t)}))}}}));var t=new l.Popup({closeButton:!1});e.map.on("mousemove",["base-hex","children"],(function(r){t.setHTML(r.features[0].id).setLngLat(r.lngLat).addTo(e.map)}))}))},methods:{uniqueValues:function(e){return Array.from(new Set(e))},setChildFeatures:function(){this.children=this.uniqueValues(this.children);var e=d.a.h3SetToFeatureCollection(this.children,(function(e){return{h3_address:e}}));this.map.getSource("children").setData(e)},filterOutParentHexes:function(e){this.map.setFilter(e,this.filtered.length?["match",["get","h3_address"],this.filtered,!1,!0]:null)},removeItemFromArray:function(e,t){e.splice(e.indexOf(t),1)},arrayIncludesItem:function(e,t){return e.includes(t)}}})),m=(r(251),r(45)),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",[t("button",{on:{click:function(t){e.selectMode=!e.selectMode}}},[e._v("Selection mode: "+e._s(e.selectMode))]),e._v(" "),t("button",{on:{click:function(t){e.rangeOnly=!e.rangeOnly}}},[e._v("show new range only: "+e._s(e.rangeOnly))]),e._v(" "),t("div",{attrs:{id:"map-2"}})])}),[],!1,null,null,null);t.default=component.exports},289:function(e,t,r){"use strict";r.r(t);var n=r(1).a.extend({name:"IndexPage"}),o=r(45),component=Object(o.a)(n,(function(){var e=this._self._c;this._self._setupProxy;return e("Map")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Map:r(275).default})}}]);