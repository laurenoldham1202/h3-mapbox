/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[67,66],{470:function(e,t,n){"use strict";var r=n(18),o=n(7),l=n(90),h=n(27),d=n(20),c=n(67),m=n(157),f=n(113),y=n(228),v=n(5),w=n(62),C=n(74).f,L=n(54).f,M=n(22).f,k=n(471).trim,I="Number",N=o.Number,T=N.prototype,S=c(w(T))==I,x=function(e){if(f(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,r,o,l,h,d,code,c=y(e,"number");if("string"==typeof c&&c.length>2)if(43===(t=(c=k(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(h=(l=c.slice(2)).length,d=0;d<h;d++)if((code=l.charCodeAt(d))<48||code>o)return NaN;return parseInt(l,r)}return+c};if(l(I,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var A,z=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof z&&(S?v((function(){T.valueOf.call(n)})):c(n)!=I)?m(new N(x(t)),n,z):x(t)},G=r?C(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),W=0;G.length>W;W++)d(N,A=G[W])&&!d(z,A)&&M(z,A,L(N,A));z.prototype=T,T.constructor=z,h(o,I,z)}},471:function(e,t,n){var r=n(35),o=n(16),l="["+n(472)+"]",h=RegExp("^"+l+l+"*"),d=RegExp(l+l+"*$"),c=function(e){return function(t){var n=o(r(t));return 1&e&&(n=n.replace(h,"")),2&e&&(n=n.replace(d,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},472:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},509:function(e,t,n){"use strict";n.r(t);n(470),n(41);var r={name:"CloMapGoogleMarker",props:{google:{type:Object,required:!0},map:{type:Object,required:!0},marker:{type:Object,required:!0},content:{type:String,default:null},infoWindowZIndex:{type:Number,default:1}},data:function(){return{markerInstance:null,infoWindow:null,generic:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"> <g fill-rule="evenodd"> <path fill="#FFF" d="M5.26969384,11.41227 L5.22772618,11.2378341 C5.07636739,10.617133 5,9.99643199 5,9.39535498 C5,5.31791602 8.14000688,2 11.999656,2 C15.8599931,2 19,5.31791602 19,9.39535498 C19,9.99643199 18.9236326,10.617133 18.7715858,11.2392877 L18.7282422,11.4217186 C18.3574131,12.7881331 12.9742002,22.2202888 12.3859649,23.2916159 L12,23.9973545 L11.5906433,23.3068791 C10.9638803,22.2479079 5.67354661,12.9218673 5.26969384,11.41227 Z"/> <path fill="#228000" d="M11.648828,21.4036803 C11.1116025,20.4891143 6.57732567,12.4325217 6.23116615,11.1287786 L6.19519387,10.9781294 C6.06545776,10.4420694 6,9.90600945 6,9.38689749 C6,5.86547293 8.69143447,3 11.9997051,3 C15.3085655,3 18,5.86547293 18,9.38689749 C18,9.90600945 17.9345422,10.4420694 17.8042164,10.9793848 L17.7670647,11.1369388 C17.4492113,12.317024 12.8347339,20.4652615 12.3305322,21.3904985 L11.9997051,22 L11.648828,21.4036803 Z M12,11 C13.1045695,11 14,10.1045695 14,9 C14,7.8954305 13.1045695,7 12,7 C10.8954305,7 10,7.8954305 10,9 C10,10.1045695 10.8954305,11 12,11 Z"/> </g></svg>',personal:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill-rule="evenodd"> <path fill="#FFF" d="M5.26969384,11.41227 L5.22772618,11.2378341 C5.07636739,10.617133 5,9.99643199 5,9.39535498 C5,5.31791602 8.14000688,2 11.999656,2 C15.8599931,2 19,5.31791602 19,9.39535498 C19,9.99643199 18.9236326,10.617133 18.7715858,11.2392877 L18.7282422,11.4217186 C18.3574131,12.7881331 12.9742002,22.2229344 12.3859649,23.2942615 L12,24 L11.5906433,23.3095246 C10.9638803,22.2505534 5.67354661,12.9218673 5.26969384,11.41227 Z"/> <path fill="#007bc2" d="M11.648828,21.4036803 C11.1116025,20.4891143 6.57732567,12.4325217 6.23116615,11.1287786 L6.19519387,10.9781294 C6.06545776,10.4420694 6,9.90600945 6,9.38689749 C6,5.86547293 8.69143447,3 11.9997051,3 C15.3085655,3 18,5.86547293 18,9.38689749 C18,9.90600945 17.9345422,10.4420694 17.8042164,10.9793848 L17.7670647,11.1369388 C17.4492113,12.317024 12.8347339,20.4652615 12.3305322,21.3904985 L11.9997051,22 L11.648828,21.4036803 Z"/> </g></svg>',hotspot:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill-rule="evenodd"><path fill="#FFF" d="M5.26969384,11.41227 L5.22772618,11.2378341 C5.07636739,10.617133 5,9.99643199 5,9.39535498 C5,5.31791602 8.14000688,2 11.999656,2 C15.8599931,2 19,5.31791602 19,9.39535498 C19,9.99643199 18.9236326,10.617133 18.7715858,11.2392877 L18.7282422,11.4217186 C18.3574131,12.7881331 12.9742002,22.2229344 12.3859649,23.2942615 L12,24 L11.5906433,23.3095246 C10.9638803,22.2505534 5.67354661,12.9218673 5.26969384,11.41227 Z"/><path fill="#cc3340" d="M11.6491228,21.4036803 C11.1118974,20.4891143 6.57732567,12.4325217 6.23116615,11.1287786 L6.19519387,10.9781294 C6.06545776,10.4420694 6,9.90600945 6,9.38689749 C6,5.86547293 8.69143447,3 11.9997051,3 C15.3085655,3 18,5.86547293 18,9.38689749 C18,9.90600945 17.9345422,10.4420694 17.8042164,10.9793848 L17.7670647,11.1369388 C17.4492113,12.317024 12.8350287,20.4652615 12.3308271,21.3904985 L12,22 L11.6491228,21.4036803 Z M13.7487061,9.57553885 C12.7614377,8.20699757 12.0234269,6.97825001 12.486148,5.84226276 C13.0204574,4.53251322 9.89790383,8.65446811 9.48724703,10.9826214 C9.480739,11.0067913 8.93146113,13.5505144 11.3283692,14.2142079 C10.4107367,12.5079407 11.9596482,10.9721695 11.9596482,10.9721695 C13.0471403,12.3688002 12.8857411,13.5100134 12.5564347,14.2272727 C13.4896865,14.0103965 14.2699995,13.2885645 14.5003838,12.2884515 C14.7203552,11.3340654 14.4183826,10.5135939 13.7487061,9.57553885 Z"/></g></svg>'}},computed:{svg:function(){switch(this.marker.type){case"hotspot":return this.hotspot;case"personal":return this.personal;default:return this.generic}},size:function(){return"sm"===this.marker.size?24:32}},watch:{content:function(){this.marker.content&&this.showInfoWindow()}},mounted:function(){var e=this,t={url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this.svg),anchor:new this.google.maps.Point(this.size/2,this.size),scaledSize:new this.google.maps.Size(this.size,this.size)};this.markerInstance=new this.google.maps.Marker({position:this.marker.position,marker:this.marker,map:this.map,icon:t}),this.markerInstance.addListener("click",(function(){e.content&&e.showInfoWindow(),e.$emit("marker-click",e.marker)}))},beforeDestroy:function(){this.google.maps.event.clearListeners(this.markerInstance,"click"),this.infoWindow&&this.infoWindow.setMap(null),this.markerInstance.setMap(null)},methods:{showInfoWindow:function(){this.infoWindow?(this.infoWindow.setZIndex(this.infoWindowZIndex),this.infoWindow.setContent(this.content)):this.infoWindow=new this.google.maps.InfoWindow({content:this.marker.content,zIndex:this.infoWindowZIndex}),this.infoWindow.open(this.map,this.markerInstance)}}},o=n(2),component=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports},619:function(e,t,n){"use strict";n.r(t);n(470),n(41);var r={name:"CloMapGoogleObservations",components:{CloMapGoogleMarker:n(509).default},props:{google:{type:Object,required:!0},map:{type:Object,required:!0},gridLarge:{type:String,default:null},gridSmall:{type:String,default:null},gridNegativeLarge:{type:String,default:null},gridNegativeSmall:{type:String,default:null},showNegativeGrid:{type:Boolean,default:!1},showPoints:{type:Boolean,default:!1},gridSizeZoomThreshold:{type:Number,default:6},pointsZoomThreshold:{type:Number,default:10},points:{type:Array,default:null},dataBounds:{type:Object,default:null},geoCacheUrl:{type:String,required:!0},infoWindow:{type:Object,default:null},infoWindowZIndex:{type:Number,default:1}},data:function(){return{currentGridSize:null,markers:[],layers:[this.gridLarge,this.gridSmall,this.gridNegativeLarge,this.gridNegativeSmall]}},watch:{showNegativeGrid:function(e){this.toggleNegativeGrid()},infoWindow:{deep:!0,handler:function(){this.markers[this.infoWindow.index].content=this.infoWindow.content}}},computed:{},mounted:function(){var e=new this.google.maps.LatLngBounds(new this.google.maps.LatLng(this.dataBounds.minY,this.dataBounds.minX),new this.google.maps.LatLng(this.dataBounds.maxY,this.dataBounds.maxX));this.map.fitBounds(e),this.map.overlayMapTypes.push(null),this.map.overlayMapTypes.push(null),this.map.overlayMapTypes.push(null),this.map.overlayMapTypes.push(null),this.refreshLayers(),this.google.maps.event.addListener(this.map,"zoom_changed",this.refreshLayers),this.google.maps.event.addListener(this.map,"dragend",this.refreshLayers)},methods:{refreshLayers:function(){var e=this.map.getZoom(),t=e<this.gridSizeZoomThreshold?"large":e<=this.pointsZoomThreshold?"small":"points";if(t!==this.currentGridSize)if(this.currentGridSize=t,"points"!==t){this.hideMarkers();var n="large"===t?0:1,r="large"===t?1:0;if(null===this.map.overlayMapTypes.getAt(n)&&this.showLayer(n),this.map.overlayMapTypes.setAt(r,null),this.showNegativeGrid){var o="large"===t?2:3,l="large"===t?3:2;null===this.map.overlayMapTypes.getAt(o)&&this.showLayer(o),this.map.overlayMapTypes.setAt(l,null)}else this.map.overlayMapTypes.setAt(2,null),this.map.overlayMapTypes.setAt(3,null)}else this.showMarkers(),this.map.overlayMapTypes.setAt(0,null),this.map.overlayMapTypes.setAt(1,null),this.map.overlayMapTypes.setAt(2,null),this.map.overlayMapTypes.setAt(3,null)},toggleNegativeGrid:function(){if("points"!==this.currentGridSize)if(this.showNegativeGrid){var e="large"===this.currentGridSize?2:3,t="large"===this.currentGridSize?3:2;null===this.map.overlayMapTypes.getAt(e)&&this.showLayer(e),this.map.overlayMapTypes.setAt(t,null)}else this.map.overlayMapTypes.setAt(2,null),this.map.overlayMapTypes.setAt(3,null)},showLayer:function(e){var t=this,n={getTileUrl:function(n,r){var o=t.getNormalizedPoint(n,r);return o?t.geoCacheUrl+"&zoom="+r+"&x="+o.x+"&y="+o.y+"&CQL_FILTER=result_set_id='"+t.layers[e]+"'":null},tileSize:new this.google.maps.Size(256,256),isPng:!0},r=new this.google.maps.ImageMapType(n);this.map.overlayMapTypes.setAt(e,r)},getNormalizedPoint:function(e,t){var n=e.y,r=e.x,o=1<<t;return n<0||n>=o?null:((r<0||r>=o)&&(r=(r%o+o)%o),{x:r,y:n})},showMarkers:function(){var e=this;this.markers=this.points.map((function(t){return{position:new e.google.maps.LatLng(t.y,t.x),type:t.hs?"hotspot":"personal",size:t.rec?"lg":"sm",content:t.content,id:t.n}}))},hideMarkers:function(){this.markers=[]},markerClick:function(marker){this.$emit("marker-click",marker)}}},o=n(2),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.markers,(function(marker,t){return n("CloMapGoogleMarker",{key:t,attrs:{marker:marker,content:marker.content,google:e.google,map:e.map},on:{"marker-click":e.markerClick}})})),1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CloMapGoogleMarker:n(509).default})}}]);